{% extends 'base.html.twig' %}

{% block title %}Restaurant index{% endblock %}

{% block body %}
<!-- Team Start -->

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/2.13.1/OpenLayers.js"></script>
    <style>
        html, body, #map {
            margin: 0;
            width: 100%;
            padding:40px;
            height: 100%;
            z-index:-1;
        }
    </style>
</head>
<body>
<div id="map"></div>
<script>
    var markersData = {{ markers|json_encode|raw }};//bich ya3milik convertion tableau mita3 markers a json

    var map = new OpenLayers.Map('map');
    map.addLayer(new OpenLayers.Layer.OSM());
    //hatha addlayer ili bich y5alik ta5tar il style mita3 il map "OSM" Style par defaut

    var centerLonLat = new OpenLayers.LonLat(10.189216234652505, 36.89883995487207)
        .transform(
            new OpenLayers.Projection("EPSG:4326"), //affichage flou mel lowel puzzle
            map.getProjectionObject()
        );

        
    map.setCenter(centerLonLat, 14);
        
    markersData.forEach(function(marker) {
        addMarker(marker.latitude, marker.longitude);
    });

    function addMarker(lat, lon) {
        var markers = new OpenLayers.Layer.Markers("Markers");
        map.addLayer(markers); // bich n9olou lina lasa9 il marker 3al map
        var lonLat = new OpenLayers.LonLat(lon, lat)
            .transform(
                new OpenLayers.Projection("EPSG:4326"),
                map.getProjectionObject()
            );//bich na3tih lin il lon lat mita3 il marker "kima fazit il setcenter"
        var icon = new OpenLayers.Icon('https://maps.google.com/mapfiles/ms/icons/red-dot.png');
        //hatha taswira mita3 il marker sri9na marker mita3 google
        markers.addMarker(new OpenLayers.Marker(lonLat, icon));//bich nhot il marker mita3 fil lon wil lat ili 3atithoulou
    }
</script>
<script>
</script>
</body>
</html>


{% endblock %}
